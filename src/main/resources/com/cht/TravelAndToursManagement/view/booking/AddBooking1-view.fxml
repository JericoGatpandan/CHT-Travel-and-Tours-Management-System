<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<AnchorPane prefHeight="903.0" prefWidth="1100" style="-fx-background-color: rgba(0, 0, 0, 0.5);" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.cht.TravelAndToursManagement.controller.booking.BookingStep1Controller">

    <!-- Modal Container -->
    <StackPane AnchorPane.bottomAnchor="50" AnchorPane.leftAnchor="50" AnchorPane.rightAnchor="50" AnchorPane.topAnchor="50">
        <VBox spacing="0" style="-fx-background-color: white; -fx-border-radius: 12; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.15), 24, 0, 0, 12);">

            <!-- Header Section -->
            <HBox prefHeight="80" spacing="16" style="-fx-padding: 32 32 0 32;">
                <VBox spacing="8" HBox.hgrow="ALWAYS">
                    <Label style="-fx-font-family: 'Inter'; -fx-font-size: 28; -fx-font-weight:  bold; -fx-text-fill: #2C3E50;" text="New Booking" />
                    <Label style="-fx-font-family: 'Inter'; -fx-font-size:  14; -fx-text-fill: #7F8C8D;" text="Create a new travel booking for your customer" />
                </VBox>
                <Button fx:id="closeButton" onAction="#handleClose" style="-fx-padding: 8; -fx-background-color: transparent; -fx-font-size: 18; -fx-text-fill: #2C3E50; -fx-cursor: hand;" text="âœ•" />
            </HBox>

            <!-- Progress Indicator -->
            <fx:include source="../reusableComponents/Progress-indicator.fxml"/>

            <!-- Content Section -->
            <VBox prefHeight="300" spacing="24" style="-fx-padding:  24 32 32 32;" VBox.vgrow="ALWAYS">

                <!-- Title -->
                <VBox spacing="8">
                    <Label style="-fx-font-family: 'Inter'; -fx-font-size:  24; -fx-font-weight:  bold; -fx-text-fill: #2C3E50;" text="Customer Information" />
                    <Label style="-fx-font-family: 'Inter'; -fx-font-size:  14; -fx-text-fill:  #7F8C8D;" text="Select an existing customer or add a new one to continue" />
                </VBox>

                <!-- Customer Selection Cards -->
                <HBox spacing="24">
                    <!-- Existing Customer Card -->
                    <VBox fx:id="existingClientCard" spacing="12" style="-fx-border-color: #E0E0E0; -fx-border-radius: 8; -fx-border-width: 1; -fx-padding: 24; -fx-background-color:  white; -fx-background-radius: 8; -fx-cursor: hand;" HBox.hgrow="ALWAYS">
                        <HBox alignment="CENTER_LEFT" spacing="16">
                            <Label style="-fx-font-size: 32;" text="ðŸ‘¤" />
                            <VBox spacing="4">
                                <Label style="-fx-font-family: 'Inter'; -fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2C3E50;" text="Existing Customer" />
                                <Label style="-fx-font-family: 'Inter'; -fx-font-size: 12; -fx-text-fill: #7F8C8D;" text="Search from records" />
                            </VBox>
                        </HBox>
                    </VBox>

                    <!-- Add New Customer Card -->
                    <VBox fx:id="newCustomerCard" spacing="12" style="-fx-border-color: #E0E0E0; -fx-border-radius: 8; -fx-border-width:  1; -fx-padding:  24; -fx-background-color: white; -fx-background-radius: 8; -fx-cursor: hand;" HBox.hgrow="ALWAYS">
                        <HBox alignment="CENTER_LEFT" spacing="16">
                            <Label style="-fx-font-size: 32;" text="âž•" />
                            <VBox spacing="4">
                                <Label style="-fx-font-family: 'Inter'; -fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2C3E50;" text="Add New Customer" />
                                <Label style="-fx-font-family: 'Inter'; -fx-font-size: 12; -fx-text-fill: #7F8C8D;" text="Create new profile" />
                            </VBox>
                        </HBox>
                    </VBox>
                </HBox>

                <!-- Search Existing Customer -->
                <VBox fx:id="searchContainer" spacing="12" visible="false" managed="false" VBox.vgrow="ALWAYS" style="-fx-padding: 16; -fx-background-color: #f8fafc; -fx-background-radius: 10;">
                    <Label style="-fx-font-family: 'Inter'; -fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2C3E50;" text="Search Customer" />
                    <TextField fx:id="searchField" promptText="Search by name or email" visible="false" managed="false" />
                    <ListView fx:id="clientListView" VBox.vgrow="ALWAYS" visible="false" managed="false" />
                </VBox>

                <!-- New Customer Form -->
                <VBox fx:id="newCustomerForm" spacing="12" visible="false" managed="false" VBox.vgrow="ALWAYS" style="-fx-padding: 16; -fx-background-color: #f8fafc; -fx-background-radius: 10;">
                    <Label style="-fx-font-family: 'Inter'; -fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2C3E50;" text="New Customer Details" />
                    <TextField fx:id="newNameField" promptText="Full name" />
                    <TextField fx:id="newEmailField" promptText="Email" />
                    <TextField fx:id="newAddressField" promptText="Address" />
                    <TextField fx:id="newContactField" promptText="Contact number" />
                </VBox>
            </VBox>

            <!-- Footer Section - Buttons -->
            <HBox alignment="CENTER_RIGHT" prefWidth="1000.0" spacing="12" style="-fx-padding: 0 32 32 32;">
                <Button fx:id="cancelButton" maxWidth="Infinity" onAction="#handleCancel" style="-fx-padding: 10 16; -fx-font-family:  'Inter'; -fx-font-size: 14; -fx-font-weight: 500; -fx-text-fill: #0066CC; -fx-background-color: white; -fx-border-color: #0066CC; -fx-border-width:  2; -fx-border-radius: 6; -fx-cursor: hand;" text="Cancel" HBox.hgrow="ALWAYS" />
                <Button fx:id="nextButton" disable="true" maxWidth="Infinity" onAction="#handleNextStep" style="-fx-padding:  10 16; -fx-font-family: 'Inter'; -fx-font-size: 14; -fx-font-weight: 500; -fx-text-fill: white; -fx-background-color: #0066CC; -fx-border-radius: 6; -fx-cursor: hand;" text="Next Step" HBox.hgrow="ALWAYS" />
            </HBox>

        </VBox>
    </StackPane>

</AnchorPane>
